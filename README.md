# üñºÔ∏è Image TagBot - Telegram –±–æ—Ç –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–£–º–Ω—ã–π –±–æ—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ —Ç–µ–≥–∞–º, –∞–≤—Ç–æ—Ä–∞–º –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º**

[![Python](https://img.shields.io/badge/Python-3.9+-yellow?logo=python)](https://www.python.org/)
[![Telegram](https://img.shields.io/badge/Telegram%20Bot-API%2020+-blue?logo=telegram)](https://core.telegram.org/bots/api)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì§ **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** –ø—Ä—è–º–æ –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º
- üè∑ **–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤**:
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–µ–≥–æ–≤
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∞–≤—Ç–æ—Ä–∞–º, –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º, –∂–∞–Ω—Ä–∞–º
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ–≥–æ–≤
  - –ö–æ–º–∞–Ω–¥—ã `/tag_add` –∏ `/tag_remove` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- üîç **–£–¥–æ–±–Ω—ã–π –ø–æ–∏—Å–∫**:
  - –ü–æ–∏—Å–∫ –ø–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ç–µ–≥–æ–≤
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∞–≤—Ç–æ—Ä–∞–º/–ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º
  - –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–¥–∞–≤–Ω–∏–º –∑–∞–≥—Ä—É–∑–∫–∞–º
- üìÅ **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏**:
  - –ê–ª—å–±–æ–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
  - –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –ø–æ–¥–±–æ—Ä–∫–∏
  - –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.9 –∏–ª–∏ –Ω–æ–≤–µ–µ
- –ê–∫–∫–∞—É–Ω—Ç Telegram –∏ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç—å —É [@BotFather](https://t.me/BotFather))
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite/PostgreSQL)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/–≤–∞—à-username/image-tagbot.git
cd image-tagbot
```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
pip install -r requirements.txt
```
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `BOT_TOKEN`:
```bash
 export BOT_TOKEN="–í–ê–®_–¢–û–ö–ï–ù"
 ```

4. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
   ```bash
   export DATABASE_URL="sqlite:///./photos.db"
   ```

### –ú–æ–¥–µ–ª–∏ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–ë–æ—Ç –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Ç–µ–≥–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –¢–∏–ø –º–æ–¥–µ–ª–∏ –∏ –ø—É—Ç—å –∫
–≤–µ—Å–∞–º –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

| –¢–∏–ø        | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ                   |
|------------|------------------------------|
| –ê–Ω–∏–º–µ      | `ANIME_MODEL`, `ANIME_MODEL_PATH` |
| –§–æ—Ç–æ       | `PHOTO_MODEL`, `PHOTO_MODEL_PATH` |
| –î–æ–∫—É–º–µ–Ω—Ç—ã  | `DOC_MODEL`, `DOC_MODEL_PATH` |

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∏. –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ
–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: [DeepDanbooru](https://github.com/KichangKim/DeepDanbooru),
[WD‚ÄØ1.4](https://huggingface.co/SmilingWolf/wd-v1-4-anime),
[CLIP](https://github.com/openai/CLIP) –∏ —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç–∏ –∫ –≤–µ—Å–∞–º.

### –ö–∞—Ç–∞–ª–æ–≥–∏ –¥–∞–Ω–Ω—ã—Ö

–ü—É—Ç–∏ –∫ –∫–∞—Ç–∞–ª–æ–≥–∞–º –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—è
`config.py`.

- `PHOTOS_DIR` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  `photos/`)
- `DATA_ANIME_DIR` ‚Äî –ø–∞–ø–∫–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–∏–ø–∞ ¬´anime¬ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  `data/anime/`)
- `DATA_PHOTOS_DIR` ‚Äî –ø–∞–ø–∫–∞ –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `data/photos/`)
- `DATA_DOCS_DIR` ‚Äî –ø–∞–ø–∫–∞ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `data/docs/`)

–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –ø–æ —ç—Ç–∏–º –ø–∞–ø–∫–∞–º. –£–±–µ–¥–∏—Ç–µ—Å—å,
—á—Ç–æ –∫–∞—Ç–∞–ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –∑–∞–ø–∏—Å—å.

### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–æ–¥–µ–ª—å—é CLIP. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –µ—ë –º–æ–∂–Ω–æ
–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- `CLASSIFIER_MODEL` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `ViT-B-32`)
- `CLASSIFIER_MODEL_PATH` ‚Äî –∏–º—è –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω—ã—Ö –≤–µ—Å–æ–≤ –∏–ª–∏ –ø—É—Ç—å –∫ –Ω–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `openai`)
